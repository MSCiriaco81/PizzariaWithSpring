<!-- P√°gina do card√°pio de pizzas -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Card√°pio de Pizzas com Pre√ßo</title> <!-- T√≠tulo da p√°gina -->
</head>
<body>
    <!-- T√≠tulo principal -->
    <h1>üçï Card√°pio de Pizzas</h1>
    <p>Selecione os sabores desejados:</p>

    <!-- Formul√°rio do pedido -->
    <form id="form-pedido">
        <!-- Sabores dispon√≠veis -->
        <fieldset>
            <legend>Sabores</legend>
            <!-- Cada op√ß√£o representa um sabor de pizza -->
            <label><input type="radio" name="sabor" value="Calabresa" data-preco="35.00" /> Calabresa - R$ 35,00</label><br />
            <label><input type="radio" name="sabor" value="Marguerita" data-preco="30.00" /> Marguerita - R$ 30,00</label><br />
            <label><input type="radio" name="sabor" value="Frango com Catupiry" data-preco="40.00" /> Frango com Catupiry - R$ 40,00</label><br />
            <label><input type="radio" name="sabor" value="Portuguesa" data-preco="38.00" /> Portuguesa - R$ 38,00</label><br />
            <label><input type="radio" name="sabor" value="Quatro Queijos" data-preco="45.00" /> Quatro Queijos - R$ 45,00</label><br />
        </fieldset><br />

        <!-- Tamanhos dispon√≠veis -->
        <fieldset>
            <legend>Tamanho da Pizza</legend>
            <!-- Cada op√ß√£o representa um tamanho e seu multiplicador de pre√ßo -->
            <label><input type="radio" name="tamanho" value="Pequena" data-multiplicador="1" checked /> Pequena</label><br />
            <label><input type="radio" name="tamanho" value="M√©dia" data-multiplicador="1.3" /> M√©dia (+30%)</label><br />
            <label><input type="radio" name="tamanho" value="Grande" data-multiplicador="1.5" /> Grande (+50%)</label><br />
        </fieldset><br />

        <!-- Adicionais dispon√≠veis -->
        <fieldset>
            <legend>Adicionais</legend>
            <!-- Cada op√ß√£o representa um adicional extra -->
            <label><input type="checkbox" name="adicional" value="Borda Recheada" data-preco="5.00" /> Borda Recheada - R$ 5,00</label><br />
            <label><input type="checkbox" name="adicional" value="Extra Queijo" data-preco="7.00" /> Extra de Queijo - R$ 7,00</label><br />
            <label><input type="checkbox" name="adicional" value="Bacon" data-preco="6.00" /> Bacon - R$ 6,00</label><br />
            <label><input type="checkbox" name="adicional" value="Pepperoni" data-preco="8.00" /> Pepperoni - R$ 8,00</label><br />
            <label><input type="checkbox" name="adicional" value="Azeitona" data-preco="3.00" /> Azeitona - R$ 3,00</label><br />
            <label><input type="checkbox" name="adicional" value="Champignon" data-preco="4.00" /> Champignon - R$ 4,00</label><br />
            <label><input type="checkbox" name="adicional" value="Alho" data-preco="2.00" /> Alho - R$ 2,00</label><br />
        </fieldset><br />

    <button type="submit">Enviar Pedido</button>
</form>

<script>
    const form = document.getElementById('form-pedido');

    form.addEventListener('submit', (e) => {
        e.preventDefault();

        const saboresSelecionados = Array.from(document.querySelectorAll('input[name="sabor"]:checked'));
        if (saboresSelecionados.length === 0) {
            alert('Por favor, selecione ao menos um sabor.');
            return;
        }

        // Tamanhos
        const tamanhoSelecionado = document.querySelector('input[name="tamanho"]:checked');
        const multiplicador = parseFloat(tamanhoSelecionado.getAttribute('data-multiplicador'));
        const tamanhoNome = tamanhoSelecionado.value;

        // Adicionais
        const adicionaisSelecionados = Array.from(document.querySelectorAll('input[name="adicional"]:checked'));

        let totalSabores = saboresSelecionados.reduce((acc, el) => acc + parseFloat(el.dataset.preco), 0);
        let totalAdicionais = adicionaisSelecionados.reduce((acc, el) => acc + parseFloat(el.dataset.preco), 0);

        // Aplicar multiplicador no total dos sabores
        const total = (totalSabores * multiplicador) + totalAdicionais;

        const query = new URLSearchParams({
            sabores: saboresSelecionados.map(el => el.value).join(','),
            tamanho: tamanhoNome,
            adicionais: adicionaisSelecionados.map(el => el.value).join(',') || 'Nenhum',
            total: total.toFixed(2)
        });

        window.location.href = `/pedido?${query.toString()}`;
    });
</script>
</body>
</html>
